

colcon build
source install/setup.sh
ros2 run xline_path_planner planner_node

source install/setup.sh
ros2 service call /plan_path xline_path_planner/srv/PlanPath "{file_name: 'square_1m.json'}"

-------------------------------------------------------------------
# 安装rosbridge (如果还没安装)
sudo apt install ros-humble-rosbridge-suite
# 启动rosbridge服务器，同时开启HTTP和WebSocket
ros2 launch rosbridge_server rosbridge_websocket_launch.xml
-------------------------------------------------------------------

无需保留对旧格式的兼容，为了有更好的扩展性，xline_path_planner/include/xline_path_planner/cad_parser.hpp中的类别由字段"layers"决定，也就是说需要动态确定类别。请深度分析我的需求并实现



xline_path_planner/include/xline_path_planner/output_formatter.hpp将规划好的路径格式化为JSON输出时需要重新参考文档“docs/导出JSON数据结构说明.md”，规划的路径有转场路径，对于转场路径："color"统一为浅灰色，透明度位0.5；"id"统一为1000000；"type"统一为line；"selected"统一为false；"line_type"统一为空字符；"hidden"统一为false；"thickness"统一位1.0； "layer_id"统一为1000000； "line_type"统一为空字符。请详细分析我的需求并实现

在导出数据时是不是没有对圆和圆弧进行导出，圆和圆弧也需要包含起点和终点，详细分析

现在有个新的需求是：
1、现在的打印机有三个分别是LEFT_PRINTER、RIGHT_PRINTER、CENTER_PRINTERS
2、喷码机的选择不再统一由xline_path_planner/config/planner.yaml来配置，而是在路径规划期间根据具体情况由算法选择（暂未实现），默认使用CENTER_PRINTERS喷码机
3、即使使用CENTER_PRINTERS喷码机也可以设置偏移
4、由于不再需要由xline_path_planner/config/planner.yaml来配置喷码机的旋转，offsets是否可以移除

综合代码详细分析我的需求，给出最佳的实践方案

无需保留兼容性代码


还有另外的需求是需要在规划的每条路径中添加以下信息，enabled表示需要打印（与work等价），其它的可以从字面含义来理解，mode先默认统一为solid，综合代码详细分析我的需求，给出最佳的实践方案：

      "ink": {                                              
        "enabled": true,                                    
        "mode": "solid" | "dashed" | "text",               
        "printer": "center" | "left" | "right"                     
      }     


  1. 发布机器人位置（在另一个终端）：
  ros2 topic pub /robot_pose geometry_msgs/msg/PoseStamped \
    "{header: {frame_id: 'map'}, pose: {position: {x: -0.5, y: -0.5, z: 0.0}}}"

  2. 调用规划服务：
  ros2 service call /plan_path xline_path_planner/srv/PlanPath \
    "{file_name: 'square_1m.json'}"